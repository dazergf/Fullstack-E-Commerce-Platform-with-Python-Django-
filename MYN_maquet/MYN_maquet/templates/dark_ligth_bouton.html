{% load static %}
<div>
    <button class="dark_light_toggle active" aria-label="Toggle Dark/Light Mode">
        <img src="{% static 'marquet/images/light_mode.png' %}" alt="Dark Mode" id="dark-light-icon">
        <span class="toggle-text">Light</span>
    </button>
    
</div>
<script>
    document.addEventListener("DOMContentLoaded", () => {
        const toggleButton = document.querySelector('.dark_light_toggle');
        const image = toggleButton.querySelector('img');

        // Définir les chemins (Django interprétera ces lignes)
        const lightModeSrc = "{% static 'marquet/images/light_mode.png' %}";
        const darkModeSrc = "{% static 'marquet/images/dark_mode.png' %}";

        // Appliquer le thème sauvegardé au démarrage
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.body.classList.add('dark-mode');
            image.src = darkModeSrc;
        } else {
            document.body.classList.remove('dark-mode');
            image.src = lightModeSrc;
        }

        // Gestion du clic
        toggleButton.addEventListener('click', () => {
            const isDark = document.body.classList.toggle('dark-mode');
            if (isDark) {
                image.src = darkModeSrc;
                localStorage.setItem('theme', 'dark');
            } else {
                image.src = lightModeSrc;
                localStorage.setItem('theme', 'light');
            }
        });
    });
</script>